import{r as t,h as e,g as s,f as o,c as n}from "./p-edd43e6c.js";const i=class{constructor(e){t(this,e)}render(){return[e("ion-app",null,e("todo-list",null))]}},r=class{constructor(e){t(this,e),this.todoList=[]}render(){return e("div",{style:{display:" flex",flexDirection:"column"}},this.todoList.map(t=>e("todo-item",{key:t.id.toString(),description:t})))}},c= t=>!("isConnected"in t)||t.isConnected,l=(()=>{let t;return(...e)=>{t&&clearTimeout(t),t=setTimeout(()=>{t=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(c))})(...e)},2e3)}})(),{state:a,onChange:d}=(()=>{const t=((t, e=((t, e)=>t!==e))=>{let s=new Map(Object.entries(null!=t?t:{}));const o={dispose:[],get:[],set:[],reset:[]},n=()=>{s=new Map(Object.entries(null!=t?t:{})),o.reset.forEach(t=>t())},i= t=>(o.get.forEach(e=>e(t)),s.get(t)),r=(t, n)=>{const i=s.get(t);e(n,i,t)&&(s.set(t,n),o.set.forEach(e=>e(t,n,i)))},c="undefined"==typeof Proxy?{}:new Proxy(t,{get:(t, e)=>i(e),ownKeys:()=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t, e)=>s.has(e),set:(t, e, s)=>(r(e,s),!0)}),l=(t, e)=>(o[t].push(e),()=>{((t, e)=>{const s=t.indexOf(e);s>=0&&(t[s]=t[t.length-1],t.length--)})(o[t],e)});return{state:c,get:i,set:r,on:l,onChange:(e, s)=>{const o=l("set",(t, o)=>{t===e&&s(o)}),n=l("reset",()=>s(t[e]));return()=>{o(),n()}},use:(...t)=>t.forEach(t=>{t.set&&l("set",t.set),t.get&&l("get",t.get),t.reset&&l("reset",t.reset)}),dispose:()=>{o.dispose.forEach(t=>t()),n()},reset:n}})({items:[{id:new Date,title:"test",description:"",isDone:!0}],itemsLength:1},void 0);return(({on:t})=>{const e=new Map;"function"==typeof s&&(t("dispose",()=>{e.clear()}),t("get", t=>{const o=s();o&&((t, e, s)=>{const o=t.get(e);o?o.includes(s)||o.push(s):t.set(e,[s])})(e,t,o)}),t("set", t=>{const s=e.get(t);s&&e.set(t,s.filter(o)),l(e)}),t("reset",()=>{e.forEach(t=>t.forEach(o)),l(e)}))})(t),t})();d("items", t=>{console.log("on change",t),a.itemsLength=a.items.length});const h=class{constructor(e){t(this,e),this.value=""}render(){return[e("ion-input",{type:"text",name:"todo title",onIonChange: t=>this.value=t.detail.value}),e("ion-button",{onClick:()=>this.addTodoItem(this.value)},"add"),e("ion-button",{onClick:()=>this.deleteAllTodoItem()},"delete all"),e("span",null,"total: ",a.itemsLength)]}},u=class{constructor(e){t(this,e),this.changeIsDone=n(this,"changeIsDone",7)}render(){return console.log("item render",this.description),[e("input",{type:"checkbox",checked:this.description.isDone,onChange:()=>this.changeIsDone.emit({id:this.description.id,value:!this.description.isDone})}),e("span",{style:this.description.isDone?{textDecoration:"line-through"}:{textDecoration:"none"}},this.description.title)]}},p=class{constructor(e){t(this,e)}isDoneChange(t){const{id:e,value:s}=t.detail,o=a.items.findIndex(t=>t.id===e);a.items[o].isDone=s,a.items[o]=Object.assign({},a.items[o]),a.items=[...a.items]}addItem(t){console.log("addItem",t),a.items=[...a.items,{id:new Date,title:t,description:"",isDone:!1}]}deleteAllItems(){a.items=[]}render(){return[e("h1",null,"Todo list"),e("list-item",{todoList:a.items}),e("todo-creator",{addTodoItem: t=>this.addItem(t),deleteAllTodoItem:()=>this.deleteAllItems()})]}};export{i as app_root,r as list_item,h as todo_creator,u as todo_item,p as todo_list}